{# setting event cards #}
{% set is_past_event = end_date < now? true : false %}
{% set title = node.label %}
{% set summary = content.field_summary | field_value %}
{% set kicker = content.field_kicker | field_value %}
{% set deck = content.field_deck | field_value %}
{% set youtube_id = content.field_youtube_id | field_value %}
{% set registration_url = content.field_registration_url | render | trim %}
{% set date = node.created.value | format_date('custom', 'M d, Y') %}
{% set month = content.field_start_date.value | date("M") %}
{% set day = content.field_start_date.value | date("d") %}
{% set year = content.field_start_date.value | date("Y") %}

<article class="card card-event {% if is_past_event %} card-event--past
			{% endif %}card-linked" aria-labelledby="{{ title }}">
	<div class="card-event__main">
		<div class="card-event__header">
			{% if kicker %}
				<div class="flex-align-end card-event__kicker">
					<span>{{ kicker }}</span>
				</div>
			{% endif %}
			<h2 class="card-event__title" id="{{ title }}">
				<a href="{{ registration_url }}" title="{{ title }}" rel="bookmark">{{ title }}</a>
			</h2>
		</div>

		<div class="card-event__body">
			{% if summary %}
				<div class="card-event__summary">
					{{ summary }}
				</div>
			{% else %}
				<div class="card-event__deck">{{ deck }}</div>
			{% endif %}

			{% if youtube_id %}
				<div class="card-event__watch-label">
					<svg class="usa-icon dg-icon dg-icon--large margin-bottom-05" aria-hidden="true" focusable="false">{# todo: check to see if this path needs to be updated #}
						{# <use xlink:href="{{ "uswds/img/sprite.svg#youtube" | relURL }}"></use> #}
						{# <use href="{{ drupal_url(theme_path ~ '/static/digitalgov/img/sprite.svg#youtube' ) }}"></use> #}

						{# todo: check to see if this path needs to be updated #}

					</svg>
					Watch Video
				</div>
			{% endif %}

			{# todo: look into the past event thing this looks to be showing the hosts/authors if ther is not a video thta was added #}
		{# {% if is_past_event %}
								{{- partial "core/authors-list.html" (dict "scope" . "authors" .Params.authors "isInline" true) -}}
							{{ end }} #}
			{# todo: look into the past event thing #}

		</div>
	</div>

	<div class="card-event__aside">
		<div class="card-event__date">
			<time class="card-event__datetime" datetime="{{ start_date }}">
				<span class="card-event__datetime-month">{{ month }}</span>
				<span class="card-event__datetime-day">{{ day }}
					<span class="card-event__datetime-comma">,</span>
				</span>
				<span class="card-event__datetime-year--mobile">{{ year }}</span>
			</time>

			{% if is_past_event %}
				<span class="card-event__date-label">
					<span class="card-event__datetime-year">{{ year }}</span>
				</span>
			{% else %}
				<a aria-label="Register for {{ title }}" class="card-event__cta" href="{{ registration_url }}">
					Register
					<time class="card-event__datetime--mobile" datetime="{{ start_date }}">
						<span>for</span>
						<span class="card-event__datetime-month">{{ month }}</span>
						<span class="card-event__datetime-day">{{ day }}</span>
					</time>
				</a>
			{% endif %}
		</div>
	</div>
</article>

{% if node.bundle == 'news' %}
<article class="card-news--internal" aria-labelledby="{{ title }}">
	<div class="card__content">
			<h3 id="{{ title }}">
				{# <a href="{{- $internalLink -}}">{{ title }}</a> #}
      <a>{{ title }}</a>
			</h3>
			{% if summary %}
				<div class="summary">
					<p>{{ summary }}</p>
				</div>
			{% else %}
				<div class="deck">
					<p>{{ deck }}</p>
				</div>
			{% endif %}

			{% if authors %}
      {# todo: follow up on authors list #}
				{# {{ partial "core/authors-list.html" (dict "scope" . "authors" .Params.authors "isInline" true) }} #}
			{% endif %}
    {% endif %}
	</div>

	<div class="card__media">
	{# {{/* Use a custom favicon set in /sources/source_[slug].md */}} #}
  {# todo: follow up on if the news is external #}
	{% if isExternal %}
		{% if sourceLogo %}
			{# <img src="{{ $sourceLogoPath | relURL }}" alt="{{- $sourceLogo }} logo"/> #}
			{% else %}
		{# {{/* Otherwise, use the Favicon that Google stores for the site. */}} #}
    {# todo: follow up on this getting the favicon from the agency #}
		{# <img src="https://www.google.com/s2/favicons?domain={{- $externalLink -}}" alt="{{- $source }} logo"/> #}
	{% endif %}
{% else %}
	{# {{ partial "core/img-featured.html" . }} #}
{% endif %}
</div>
<div class="card__meta">
<div class="date">{{ date }}
</div>
</div>
</article>
{% endif %}

{% if node.bundle == 'short_post' %}
<article class="card-news--external" aria-labelledby="{{ title }}">
	<div class="card__content">
				<div class="card__summary">
        <h3 id="{{ title }}">
					{# todo: follow up on external link below #}
					{# <a href="{{- $externalLink -}}">{{- $title | markdownify -}}</a> #}<a>{{ title }}
				</a>
				</h3>
					<p>
          {% if deck %}
					{{ deck }}
					{% endif %}
					{# todo: follow up on source page#}
						{% if sourcePage %}
            <em class="card__source source"> â€” via
						{# todo: check ext link #}
							{# <a href="{{ $externalLink }}" title="Read at {{ sourceName }}">{{ sourceName }}</a> #}
						</em>
				</p>
			</div>
	</div>

	<div class="card__media">
		{# {{/* Use a custom favicon set in /sources/source_[slug].md */}} #}
				{% if sourceLogo %}
				{# <img src="{{ $sourceLogoPath | relURL }}" alt="{{- $sourceLogo }} logo"/> #}
				{% else %}
			{# {{/* Otherwise, use the Favicon that Google stores for the site. */}} #}
				{# todo: follow up on this getting the favicon from the agency #}
				{# <img src="https://www.google.com/s2/favicons?domain={{- $externalLink -}}" alt="{{- $source }} logo"/> #}
			{% elseif %}
			{# {{ partial "core/img-featured.html" . }} #}
		{% endif %}
	</div>
	<div class="card__meta">
		<div class="date">{{ date }}
		</div>
	</div>
</article>
{% endif %}

